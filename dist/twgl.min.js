/**
 * @license twgl.js 1.1.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
 * Available via the MIT license.
 * see: http://github.com/greggman/twgl.js for details
 */
/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
!function(a,b){"function"==typeof define&&define.amd&&define([],b),"undefined"!=typeof module&&module.exports?module.exports=b():a.twgl=b()}(this,function(){var a,b,c;return function(d){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,b){return function(){var c=v.call(arguments,0);return"string"!=typeof c[0]&&1===c.length&&c.push(null),n.apply(d,c.concat([a,b]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var b=r[a];delete r[a],t[a]=!0,m.apply(d,b)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={notrequirebecasebrowserifymessesup:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,b,c,f){var h,k,l,m,n,s,u=[],v=typeof c;if(f=f||a,"undefined"===v||"function"===v){for(b=!b.length&&c.length?["notrequirebecasebrowserifymessesup","exports","module"]:b,n=0;n<b.length;n+=1)if(m=o(b[n],f),k=m.f,"notrequirebecasebrowserifymessesup"===k)u[n]=p.notrequirebecasebrowserifymessesup(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=c?c.apply(q[a],u):void 0,a&&(h&&h.exports!==d&&h.exports!==q[a]?q[a]=h.exports:l===d&&s||(q[a]=l))}else a&&(q[a]=c)},a=b=n=function(a,b,c,e,f){if("string"==typeof a)return p[a]?p[a](b):j(o(a,b).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!b)return;b.splice?(a=b,b=c,c=null):a=d}return b=b||function(){},"function"==typeof c&&(c=e,e=f),e?m(d,a,b,c):setTimeout(function(){m(d,a,b,c)},4),n},n.config=function(a){return n(a)},a._defined=q,c=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},c.amd={jQuery:!0}}(),c("node_modules/almond/almond.js",function(){}),c("twgl/typedarrays",[],function(){function a(a){if(a instanceof Int8Array)return d;if(a instanceof Uint8Array)return e;if(a instanceof Uint8ClampedArray)return e;if(a instanceof Int16Array)return f;if(a instanceof Uint16Array)return g;if(a instanceof Int32Array)return h;if(a instanceof Uint32Array)return i;if(a instanceof Float32Array)return j;throw"unsupported typed array type"}function b(a){switch(a){case d:return Int8Array;case e:return Uint8Array;case f:return Int16Array;case g:return Uint16Array;case h:return Int32Array;case i:return Uint32Array;case j:return Float32Array;default:throw"unknown gl type"}}function c(a){return a&&a.buffer&&a.buffer instanceof ArrayBuffer}var d=5120,e=5121,f=5122,g=5123,h=5124,i=5125,j=5126;return{getGLTypeForTypedArray:a,getTypedArrayTypeForGLType:b,isArrayBuffer:c}}),c("twgl/attributes",["./typedarrays"],function(a){function b(a){q.attribPrefix=a}function c(a){Object.keys(a).forEach(function(b){q[b]=a[b]})}function d(a,b,c,d,e){a.bindBuffer(b,c),a.bufferData(b,d,e||a.STATIC_DRAW)}function e(a,b,c,e){if(b instanceof WebGLBuffer)return b;c=c||a.ARRAY_BUFFER;var f=a.createBuffer();return d(a,c,f,b,e),f}function f(a){return"indices"===a}function g(a){return a instanceof Int8Array?!0:a instanceof Uint8Array?!0:!1}function h(a){return a.length?a:a.data}function i(a,b){var c;if(c=a.indexOf("coord")>=0?2:a.indexOf("color")>=0?4:3,b%c>0)throw"can not guess numComponents. You should specify it.";return c}function j(a,b){return a.numComponents||a.size||i(b,h(a).length)}function k(b,c){if(a.isArrayBuffer(b))return b;if(a.isArrayBuffer(b.data))return b.data;Array.isArray(b)&&(b={data:b});var d=b.type;return d||(d="indices"===c?Uint16Array:Float32Array),new d(b.data)}function l(b,c){var d={};return Object.keys(c).forEach(function(h){if(!f(h)){var i=c[h],l=i.attrib||i.name||i.attribName||q.attribPrefix+h,m=k(i,h);d[l]={buffer:e(b,m,void 0,i.drawType),numComponents:j(i,h),type:a.getGLTypeForTypedArray(m),normalize:void 0!==i.normalize?i.normalize:g(m),stride:i.stride||0,offset:i.offset||0,drawType:i.drawType}}}),d}function m(a,b,c,e){c=k(c),e?(a.bindBuffer(a.ARRAY_BUFFER,b.buffer),a.bufferSubData(a.ARRAY_BUFFER,e,c)):d(a,a.ARRAY_BUFFER,b.buffer,c,b.drawType)}function n(b,c){var d={attribs:l(b,c)},f=c.indices;return f?(f=k(f,"indices"),d.indices=e(b,f,b.ELEMENT_ARRAY_BUFFER),d.numElements=f.length,d.elementType=a.getGLTypeForTypedArray(f)):d.numElements=r(c),d}function o(a,b,c){var d="indices"===c?a.ELEMENT_ARRAY_BUFFER:a.ARRAY_BUFFER,f=k(b,c);return e(a,f,d)}function p(a,b){var c={};return Object.keys(b).forEach(function(d){c[d]=o(a,b[d],d)}),c}var q={attribPrefix:""},r=function(){var a=["position","positions","a_position"];return function(b){for(var c,d=0;d<a.length&&(c=a[d],!(c in b));++d);d===a.length&&(c=Object.keys(b)[0]);var e=b[c],f=h(e).length,g=j(e,c),i=f/g;if(f%g>0)throw"numComponents "+g+" not correct for length "+f;return i}}();return{createAttribsFromArrays:l,createBuffersFromArrays:p,createBufferFromArray:o,createBufferFromTypedArray:e,createBufferInfoFromArrays:n,setAttribInfoBufferFromArray:m,setAttributePrefix:b,setDefaults_:c,getNumComponents_:j,getArray_:h}}),c("twgl/programs",[],function(){function a(a){return a.split("\n").map(function(a,b){return b+1+": "+a}).join("\n")}function b(b,c,d,e){var f=e||o,g=b.createShader(d);b.shaderSource(g,c),b.compileShader(g);var h=b.getShaderParameter(g,b.COMPILE_STATUS);if(!h){var i=b.getShaderInfoLog(g);return f(a(c)+"\n*** Error compiling shader: "+i),b.deleteShader(g),null}return g}function c(a,b,c,d,e){var f=e||o,g=a.createProgram();b.forEach(function(b){a.attachShader(g,b)}),c&&c.forEach(function(b,c){a.bindAttribLocation(g,d?d[c]:c,b)}),a.linkProgram(g);var h=a.getProgramParameter(g,a.LINK_STATUS);if(!h){var i=a.getProgramInfoLog(g);return f("Error in program linking:"+i),a.deleteProgram(g),null}return g}function d(a,c,d,e){var f,g="",h=document.getElementById(c);if(!h)throw"*** Error: unknown script element"+c;if(g=h.text,!d)if("x-shader/x-vertex"===h.type)f=a.VERTEX_SHADER;else if("x-shader/x-fragment"===h.type)f=a.FRAGMENT_SHADER;else if(f!==a.VERTEX_SHADER&&f!==a.FRAGMENT_SHADER)throw"*** Error: unknown shader type";return b(a,g,d?d:f,e)}function e(a,b,e,f,g){for(var h=[],i=0;i<b.length;++i){var j=d(a,b[i],a[p[i]],g);if(!j)return null;h.push(j)}return c(a,h,e,f,g)}function f(a,d,e,f,g){for(var h=[],i=0;i<d.length;++i){var j=b(a,d[i],a[p[i]],g);if(!j)return null;h.push(j)}return c(a,h,e,f,g)}function g(a,b){return b===a.SAMPLER_2D?a.TEXTURE_2D:b===a.SAMPLER_CUBE?a.TEXTURE_CUBE_MAP:void 0}function h(a,b){function c(b,c){var e=a.getUniformLocation(b,c.name),f=c.type,h=c.size>1&&"[0]"===c.name.substr(-3);if(f===a.FLOAT&&h)return function(b){a.uniform1fv(e,b)};if(f===a.FLOAT)return function(b){a.uniform1f(e,b)};if(f===a.FLOAT_VEC2)return function(b){a.uniform2fv(e,b)};if(f===a.FLOAT_VEC3)return function(b){a.uniform3fv(e,b)};if(f===a.FLOAT_VEC4)return function(b){a.uniform4fv(e,b)};if(f===a.INT&&h)return function(b){a.uniform1iv(e,b)};if(f===a.INT)return function(b){a.uniform1i(e,b)};if(f===a.INT_VEC2)return function(b){a.uniform2iv(e,b)};if(f===a.INT_VEC3)return function(b){a.uniform3iv(e,b)};if(f===a.INT_VEC4)return function(b){a.uniform4iv(e,b)};if(f===a.BOOL&&h)return function(b){a.uniform1iv(e,b)};if(f===a.BOOL)return function(b){a.uniform1i(e,b)};if(f===a.BOOL_VEC2)return function(b){a.uniform2iv(e,b)};if(f===a.BOOL_VEC3)return function(b){a.uniform3iv(e,b)};if(f===a.BOOL_VEC4)return function(b){a.uniform4iv(e,b)};if(f===a.FLOAT_MAT2)return function(b){a.uniformMatrix2fv(e,!1,b)};if(f===a.FLOAT_MAT3)return function(b){a.uniformMatrix3fv(e,!1,b)};if(f===a.FLOAT_MAT4)return function(b){a.uniformMatrix4fv(e,!1,b)};if((f===a.SAMPLER_2D||f===a.SAMPLER_CUBE)&&h){for(var i=[],j=0;j<c.size;++j)i.push(d++);return function(b,c){return function(d){a.uniform1iv(e,c),d.forEach(function(d,e){a.activeTexture(a.TEXTURE0+c[e]),a.bindTexture(b,d)})}}(g(a,f),i)}if(f===a.SAMPLER_2D||f===a.SAMPLER_CUBE)return function(b,c){return function(d){a.uniform1i(e,c),a.activeTexture(a.TEXTURE0+c),a.bindTexture(b,d)}}(g(a,f),d++);throw"unknown type: 0x"+f.toString(16)}for(var d=0,e={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),h=0;f>h;++h){var i=a.getActiveUniform(b,h);if(!i)break;var j=i.name;"[0]"===j.substr(-3)&&(j=j.substr(0,j.length-3));var k=c(b,i);e[j]=k}return e}function i(a,b){for(var c=a.uniformSetters||a,d=arguments.length,e=1;d>e;++e){var f=arguments[e];if(Array.isArray(f))for(var g=f.length,h=0;g>h;++h)i(c,f[h]);else for(var j in f){var k=c[j];k&&k(f[j])}}}function j(a,b){function c(b){return function(c){a.bindBuffer(a.ARRAY_BUFFER,c.buffer),a.enableVertexAttribArray(b),a.vertexAttribPointer(b,c.numComponents||c.size,c.type||a.FLOAT,c.normalize||!1,c.stride||0,c.offset||0)}}for(var d={},e=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),f=0;e>f;++f){var g=a.getActiveAttrib(b,f);if(!g)break;var h=a.getAttribLocation(b,g.name);d[g.name]=c(h)}return d}function k(a,b){for(var c in b){var d=a[c];d&&d(b[c])}}function l(a,b,c){k(b.attribSetters||b,c.attribs),c.indices&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.indices)}function m(a,b){var c=h(a,b),d=j(a,b);return{program:b,uniformSetters:c,attribSetters:d}}function n(a,b,c,d,e){b=b.map(function(a){var b=document.getElementById(a);return b?b.text:a});var g=f(a,b,c,d,e);return g?m(a,g):null}var o=window.console&&window.console.error&&"function"==typeof window.console.error?window.console.error.bind(window.console):function(){},p=["VERTEX_SHADER","FRAGMENT_SHADER"];return{createAttributeSetters:j,createProgram:c,createProgramFromScripts:e,createProgramFromSources:f,createProgramInfo:n,createProgramInfoFromProgram:m,createUniformSetters:h,setAttributes:k,setBuffersAndAttributes:l,setUniforms:i}}),c("twgl/draw",["./programs"],function(a){function b(a,b,c,d,e){var f=c.indices,g=void 0===d?c.numElements:d;e=void 0===e?0:e,f?a.drawElements(b,g,void 0===c.elementType?a.UNSIGNED_SHORT:c.elementType,e):a.drawArrays(b,e,g)}function c(c,d){var e=null,f=null;d.forEach(function(d){if(d.active!==!1){var g=d.programInfo,h=d.bufferInfo,i=!1;g!==e&&(e=g,c.useProgram(g.program),i=!0),(i||h!==f)&&(f=h,a.setBuffersAndAttributes(c,g,h)),a.setUniforms(g,d.uniforms),b(c,d.type||c.TRIANGLES,h,d.count,d.offset)}})}return{drawBufferInfo:b,drawObjectList:c}}),c("twgl/utils",[],function(){function a(a){var b={};return Object.keys(a).forEach(function(c){b[c]=a[c]}),b}function b(a,b,c){a.forEach(function(a){var d=b[a];void 0!==d&&(c[a]=d)})}return{copyNamedProperties:b,shallowCopy:a}}),c("twgl/textures",["./typedarrays","./utils"],function(a,b){function c(a){A.textureColor=new Uint8Array([255*a[0],255*a[1],255*a[2],255*a[3]])}function d(a){return!H.test(a)}function e(a){a.textureColor&&c(a.textureColor),Object.keys(a).filter(d).forEach(function(b){A[b]=a[b]})}function f(a,b){void 0!==b.colorspaceConversion&&(J.colorSpaceConversion=a.getParameter(a.UNPACK_COLORSPACE_CONVERSION_WEBGL)),void 0!==b.premultiplyAlpha&&(J.premultiplyAlpha=a.getParameter(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL)),void 0!==b.flipY&&(J.flipY=a.getParameter(a.UNPACK_FLIP_Y_WEBGL))}function g(a,b){void 0!==b.colorspaceConversion&&a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,J.colorSpaceConversion),void 0!==b.premultiplyAlpha&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J.premultiplyAlpha),void 0!==b.flipY&&a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,J.flipY)}function h(a,b,c){var d=c.target||a.TEXTURE_2D;a.bindTexture(d,b),c.min&&a.texParameteri(d,a.TEXTURE_MIN_FILTER,c.min),c.mag&&a.texParameteri(d,a.TEXTURE_MAG_FILTER,c.mag),c.wrap&&(a.texParameteri(d,a.TEXTURE_WRAP_S,c.wrap),a.texParameteri(d,a.TEXTURE_WRAP_T,c.wrap)),c.wrapS&&a.texParameteri(d,a.TEXTURE_WRAP_S,c.wrapS),c.wrapT&&a.texParameteri(d,a.TEXTURE_WRAP_T,c.wrapT)}function i(a){return a=a||A.textureColor,B(a)?a:new Uint8Array([255*a[0],255*a[1],255*a[2],255*a[3]])}function j(a){return 0===(a&a-1)}function k(a,b,c,d,e){c=c||A.textureOptions;var f=c.target||a.TEXTURE_2D;d=d||c.width,e=e||c.height,a.bindTexture(f,b),j(d)&&j(e)?a.generateMipmap(f):(a.texParameteri(f,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(f,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(f,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE))}function l(a,b){return b=b||{},b.cubeFaceOrder||[a.TEXTURE_CUBE_MAP_POSITIVE_X,a.TEXTURE_CUBE_MAP_NEGATIVE_X,a.TEXTURE_CUBE_MAP_POSITIVE_Y,a.TEXTURE_CUBE_MAP_NEGATIVE_Y,a.TEXTURE_CUBE_MAP_POSITIVE_Z,a.TEXTURE_CUBE_MAP_NEGATIVE_Z]}function m(a,b){var c=l(a,b),d=c.map(function(a,b){return{face:a,ndx:b}});return d.sort(function(a,b){return a.face-b.face}),d}function n(){}function o(a,b,c){c=c||n;var d=new Image;return b=void 0!==b?b:A.crossOrigin,void 0!==b&&(d.crossOrigin=b),d.onerror=function(){var b="couldn't load image: "+a;error(b),c(b,d)},d.onload=function(){c(null,d)},d.src=a,d}function p(a,b,c){c=c||A.textureOptions;var d=c.target||a.TEXTURE_2D;if(a.bindTexture(d,b),c.color!==!1){var e=i(c.color);if(d===a.TEXTURE_CUBE_MAP)for(var f=0;6>f;++f)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e);else a.texImage2D(d,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,e)}}function q(a,c,d,e){e=e||n,d=d||A.textureOptions,p(a,c,d),d=b.shallowCopy(d);var f=o(d.src,d.crossOrigin,function(b,f){b?e(b,c,f):(K(a,c,f,d),e(null,c,f))});return f}function r(a,c,d,e){function h(b){return function(h,i){--r,h?s.push(h):i.width!==i.height?s.push("cubemap face img is not a square: "+i.src):(f(a,d),a.bindTexture(m,c),5===r?l(a).forEach(function(b){a.texImage2D(b,0,j,j,k,i)}):a.texImage2D(b,0,j,j,k,i),g(a,d),a.generateMipmap(m)),0===r&&e(s.length?s:void 0,q,c)}}e=e||n;var i=d.src;if(6!==i.length)throw"there must be 6 urls for a cubemap";var j=d.format||a.RGBA,k=d.type||a.UNSIGNED_BYTE,m=d.target||a.TEXTURE_2D;if(m!==a.TEXTURE_CUBE_MAP)throw"target must be TEXTURE_CUBE_MAP";p(a,c,d),d=b.shallowCopy(d);var q,r=6,s=[],t=l(a,d);q=i.map(function(a,b){return o(a,d.crossOrigin,h(t[b]))})}function s(a){switch(a){case C:case F:return 1;case G:return 2;case D:return 3;case E:return 4;default:throw"unknown type: "+a}}function t(b,c){return B(c)?a.getGLTypeForTypedArray(c):b.UNSIGNED_BYTE}function u(b,c,d,e){e=e||A.textureOptions;var h=e.target||b.TEXTURE_2D;b.bindTexture(h,c);var i=e.width,j=e.height,k=e.format||b.RGBA,l=e.type||t(b,d),n=s(k),o=d.length/n;if(o%1)throw"length wrong size for format: "+I(b,k);if(i||j){if(j){if(!i&&(i=o/j,i%1))throw"can't guess width"}else if(j=o/i,j%1)throw"can't guess height"}else{var p=Math.sqrt(o/(h===b.TEXTURE_CUBE_MAP?6:1));p%1===0?(i=p,j=p):(i=o,j=1)}if(B(d))d instanceof Uint8ClampedArray&&(d=new Uint8Array(d.buffer));else{var q=a.getTypedArrayTypeForGLType(l);d=new q(d)}if(b.pixelStorei(b.UNPACK_ALIGNMENT,e.unpackAlignment||1),f(b,e),h===b.TEXTURE_CUBE_MAP){var r=o/6*n;m(b,e).forEach(function(a){var c=r*a.ndx,e=d.subarray(c,c+r);b.texImage2D(a.face,0,k,i,j,0,k,l,e)})}else b.texImage2D(h,0,k,i,j,0,k,l,d);return g(b,e),{width:i,height:j}}function v(a,b,c){var d=c.target||a.TEXTURE_2D;a.bindTexture(d,b);var e=c.format||a.RGBA,g=c.type||a.UNSIGNED_BYTE;if(f(a,c),d===a.TEXTURE_CUBE_MAP)for(var h=0;6>h;++h)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+h,0,e,c.width,c.height,0,e,g,null);else a.texImage2D(d,0,e,c.width,c.height,0,e,g,null)}function w(a,b,c){c=c||n,b=b||A.textureOptions;var d=a.createTexture(),e=b.target||a.TEXTURE_2D,f=b.width||1,g=b.height||1;a.bindTexture(e,d),e===a.TEXTURE_CUBE_MAP&&(a.texParameteri(e,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(e,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));var i=b.src;if(i)if("function"==typeof i&&(i=i(a,b)),"string"==typeof i)q(a,d,b,c);else if(B(i)||Array.isArray(i)&&("number"==typeof i[0]||Array.isArray(i[0])||B(i[0]))){var j=u(a,d,i,b);f=j.width,g=j.height}else if(Array.isArray(i)&&"string"==typeof i[0])r(a,d,b,c);else{if(!(i instanceof HTMLElement))throw"unsupported src type";K(a,d,i,b),f=i.width,g=i.height}else v(a,d,b);return b.auto!==!1&&k(a,d,b,f,g),h(a,d,b),d}function x(a,b,c,d,e){d=d||c.width,e=e||c.height;var f=c.target||a.TEXTURE_2D;a.bindTexture(f,b);var g,h=c.format||a.RGBA,i=c.src;if(g=i&&(B(i)||Array.isArray(i)&&"number"==typeof i[0])?c.type||t(a,i):c.type||a.UNSIGNED_BYTE,f===a.TEXTURE_CUBE_MAP)for(var j=0;6>j;++j)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+j,0,h,d,e,0,h,g,null);else a.texImage2D(f,0,h,d,e,0,h,g,null)}function y(a){return"string"==typeof a||Array.isArray(a)&&"string"==typeof a[0]}function z(a,b,c){function d(){0===e&&setTimeout(function(){c(f.length?f:void 0,g,h)},0)}c=c||n;var e=0,f=[],g={},h={};return Object.keys(b).forEach(function(c){var i=b[c],j=void 0;y(i.src)&&(j=function(a,b,g){h[c]=g,--e,a&&f.push(a),d()},++e),g[c]=w(a,i,j)}),d(),g}var A={textureColor:new Uint8Array([128,192,255,255]),textureOptions:{}},B=a.isArrayBuffer,C=6406,D=6407,E=6408,F=6409,G=6410,H=/^textureColor$/,I=function(){function a(a){b||(b={},Object.keys(a).forEach(function(c){"number"==typeof a[c]&&(b[a[c]]=c)}))}var b;return function(c,d){return a(),b[d]||"0x"+d.toString(16)}}(),J={},K=function(){var a=document.createElement("canvas").getContext("2d");return function(b,c,d,e){e=e||A.textureOptions;var i=e.target||b.TEXTURE_2D,j=d.width,l=d.height,n=e.format||b.RGBA,o=e.type||b.UNSIGNED_BYTE;if(f(b,e),b.bindTexture(i,c),i===b.TEXTURE_CUBE_MAP){var p,q,r=d.width,s=d.height;if(r/6===s)p=s,q=[0,0,1,0,2,0,3,0,4,0,5,0];else if(s/6===r)p=r,q=[0,0,0,1,0,2,0,3,0,4,0,5];else if(r/3===s/2)p=r/3,q=[0,0,1,0,2,0,0,1,1,1,2,1];else{if(r/2!==s/3)throw"can't figure out cube map from element: "+(d.src?d.src:d.nodeName);p=r/2,q=[0,0,1,0,0,1,1,1,0,2,1,2]}a.canvas.width=p,a.canvas.height=p,j=p,l=p,m(b,e).forEach(function(c){var e=q[2*c.ndx+0]*p,f=q[2*c.ndx+1]*p;a.drawImage(d,e,f,p,p,0,0,p,p),b.texImage2D(c.face,0,n,n,o,a.canvas)}),a.canvas.width=1,a.canvas.height=1}else b.texImage2D(i,0,n,n,o,d);g(b,e),e.auto!==!1&&k(b,c,e,j,l),h(b,c,e)}}();return{setDefaults_:e,createTexture:w,setEmptyTexture:v,setTextureFromArray:u,loadTextureFromUrl:q,setTextureFromElement:K,setTextureFilteringForSize:k,setTextureParameters:h,setDefaultTextureColor:c,createTextures:z,resizeTexture:x,getNumComponentsForFormat:s}}),c("twgl/framebuffers",["./textures","./utils"],function(a,b){function c(a){return y[a]}function d(a){return z[a]}function e(e,f,g,h){var i=e.FRAMEBUFFER,j=e.createFramebuffer();e.bindFramebuffer(i,j),g=g||e.drawingBufferWidth,h=h||e.drawingBufferHeight,f=f||x;var k=0,l={framebuffer:j,attachments:[],width:g,height:h};return f.forEach(function(f){var j=f.attachment,m=f.format,n=c(m);if(n||(n=r+k++),!j)if(d(m))j=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,j),e.renderbufferStorage(e.RENDERBUFFER,m,g,h);else{var o=b.shallowCopy(f);o.width=g,o.height=h,o.auto=void 0===f.auto?!1:f.auto,j=a.createTexture(e,o)}if(j instanceof WebGLRenderbuffer)e.framebufferRenderbuffer(i,n,e.RENDERBUFFER,j);else{if(!(j instanceof WebGLTexture))throw"unknown attachment type";e.framebufferTexture2D(i,n,f.texTarget||e.TEXTURE_2D,j,f.level||0)}l.attachments.push(j)}),l}function f(b,c,d,e,f){e=e||b.drawingBufferWidth,f=f||b.drawingBufferHeight,c.width=e,c.height=f,d=d||x,d.forEach(function(d,g){var h=c.attachments[g],i=d.format;if(h instanceof WebGLRenderbuffer)b.bindRenderbuffer(b.RENDERBUFFER,h),b.renderbufferStorage(b.RENDERBUFFER,i,e,f);else{if(!(h instanceof WebGLTexture))throw"unknown attachment type";a.resizeTexture(b,h,d,e,f)}})}function g(a,b,c){c=c||a.FRAMEBUFFER,b?(a.bindFramebuffer(c,b.framebuffer),a.viewport(0,0,b.width,b.height)):(a.bindFramebuffer(c,null),a.viewport(0,0,a.drawingBufferWidth,a.drawingBufferHeight))}var h=5121,i=6402,j=6408,k=32854,l=32855,m=36194,n=33189,o=6401,p=36168,q=34041,r=36064,s=36096,t=36128,u=33306,v=33071,w=9729,x=[{format:j,type:h,min:w,wrap:v},{format:q}],y={};y[q]=u,y[o]=t,y[p]=t,y[i]=s,y[n]=s;var z={};return z[k]=!0,z[l]=!0,z[m]=!0,z[q]=!0,z[n]=!0,z[o]=!0,z[p]=!0,{bindFramebufferInfo:g,createFramebufferInfo:e,resizeFramebufferInfo:f}}),c("twgl/twgl",["./attributes","./draw","./framebuffers","./programs","./textures","./typedarrays"],function(a,b,c,d,e,f){function g(b){a.setDefaults_(b),e.setDefaults_(b)}function h(a,b){for(var c=["webgl","experimental-webgl"],d=null,e=0;e<c.length;++e){try{d=a.getContext(c[e],b)}catch(f){}if(d)break}return d}function i(a,b){var c=h(a,b);return c}function j(a,b){b=b||1,b=Math.max(1,b);var c=a.clientWidth*b|0,d=a.clientHeight*b|0;return a.width!==c||a.height!==d?(a.width=c,a.height=d,!0):!1}function k(a){return"_"!==a[a.length-1]}function l(a,b){Object.keys(a).filter(k).forEach(function(c){b[c]=a[c]})}var m={getWebGLContext:i,resizeCanvasToDisplaySize:j,setDefaults:g};return[a,b,c,d,e,f].forEach(function(a){l(a,m)}),m}),c("main",["twgl/twgl"],function(a){return a}),b(["main"],function(a){return a},void 0,!0),c("build/js/twgl-includer",function(){}),b("main")});